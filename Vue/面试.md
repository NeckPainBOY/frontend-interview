# Vue2

# SPA 是什么? 优点和缺点


# 自定义指令
分享8个非常实用的Vue自定义指令: https://juejin.cn/post/6906028995133833230




# Vue2 和 Vue3 的不同
Vue2.7 之后都采用组合式API，在Vue3中组合式API基本上通过`<script setup>`使用。

组合式API优点：
- 更好逻辑复用
    - 解决了 mixins 的所有缺陷
    - 与第三方状态管理库与Vue的响应式系统之间的集成提供了一套简洁清晰的机制。
    - 孕育了优秀的社区项目 VueUse... 
- 更灵活的代码组织
    - 选项式代码不同逻辑被拆分到不同选项中，组合式可以将逻辑相同的写在一起，减少代码重构，维护成本。
- 更好的类型推导
    - Vue2 设计时没有考虑类型推导，需要借助`vue-class-component`，且类型体操难度大。
- 更小的包生产体积 
    - setup使得代码位于同一作用域，不用跟选项式API一样通过this访问上下文对象属性。被编译的模板可以直接访问`<script setup>`中定义的变量，无需从实例中代理。这对代码压缩更友好，因为本地变量的名字可以被压缩，但对象的属性名则不能。
        <details>
        <summary>原文</summary>
        
        搭配`<script setup>`使用组合式API比等价情况下的选项式API更高效，压缩更友好。这是由于`<script setup>`形式书写的组件模板被编译为了一个内联函数，和`<script setup>`中的代码位于同一作用域。不像选项式`API`需要依赖`this`上下文对象访问属性，被编译的模板可以直接访问`<script setup>`中定义的变量，无需从实例中代理。这对代码压缩更友好，因为本地变量的名字可以被压缩，但对象的属性名则不能。
        </details>

- 组合式API常见问答: https://cn.vuejs.org/guide/extras/composition-api-faq.html


# 组合式 API 是否覆盖了所有场景？
组合式 API 能够覆盖所有状态逻辑方面的需求。除此之外，只需要用到一小部分选项：props，emits，name 和 inheritAttrs。



# ref 和 reactive 的区别
相同：
    都可以包装深层响应式对象，使用`shallowRef`/`shallowReactive`取消深层响应
    `ref`包装对象时使用`reactive`


不同：
    `ref`返回`.value`包装的`Ref`对象(有解包)，可以对任何类型使用，
    `reactive`返回`Proxy`包装的原始对象，与原对象不相等，只能用于**对象类型**，


# toRef 和 toRefs 的区别
用法不一样，toRef 主要用途是从 ref 对象中取出一个使用，而`toRefs`主要使用是从组合式函数中返回响应式对象时。

# v-if 和 v-show 的区别
- `v-if` 是“真实的”按条件渲染，因为它确保了在切换时，条件区块内的事件监听器和子组件都会被销毁与重建。
- `v-if` 也是惰性的：如果在初次渲染时条件值为 `false`，则不会做任何事。条件区块只有当条件首次变为 true 时才被渲染。
- 相比之下，`v-show` 简单许多，元素无论初始条件如何，始终会被渲染，只有 `CSS display` 属性会被切换。
- 总的来说，v-if 有更高的切换开销，而 `v-show` 有更高的初始渲染开销。因此，如果需要频繁切换，则使用 `v-show` 较好；如果在运行时绑定条件很少改变，则 `v-if` 会更合适。

# v-for 中的 key

# hooks（表单、按钮封装）

# watch 和 watchEffect
watch 和 watchEffect 都能响应式地执行有副作用的回调。它们之间的主要区别是追踪响应式依赖的方式：

- watch 只追踪明确侦听的数据源。它不会追踪任何在回调中访问到的东西。另外，仅在数据源确实改变时才会触发回调。watch 会避免在发生副作用时追踪依赖，因此，我们能更加精确地控制回调函数的触发时机。
- watchEffect，则会在副作用发生期间追踪依赖。它会在同步执行过程中，自动追踪所有能访问到的响应式属性。这更方便，而且代码往往更简洁，但有时其响应性依赖关系会不那么明确。


# 参考
- 2023前端vue面试题（边面边更）：https://segmentfault.com/a/1190000043488732